{"version":3,"file":"preview.js","sources":["pages/site/preview.vue","../../../Downloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2l0ZS9wcmV2aWV3LnZ1ZQ"],"sourcesContent":["<template>\r\n    <view class=\"container\">\r\n        <view class=\"header\">\r\n            <text class=\"title\">踏勘信息确认</text>\r\n        </view>\r\n\r\n        <scroll-view class=\"content\" scroll-y v-if=\"summaryData.基本信息\">\r\n            <!-- Basic Info -->\r\n            <view class=\"summary-section\">\r\n                <text class=\"section-header\">基本信息</text>\r\n                <view class=\"info-grid\">\r\n                    <view class=\"info-item\" v-for=\"(value, key) in summaryData.基本信息\" :key=\"key\">\r\n                        <text class=\"info-label\">{{key}}:</text>\r\n                        <text class=\"info-value\">{{value}}</text>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- Statistics -->\r\n            <view class=\"summary-section\">\r\n                <text class=\"section-header\">清洗范围统计</text>\r\n                <view class=\"stats-grid\">\r\n                    <view class=\"stat-item\" v-for=\"(value, key) in summaryData.清洗范围统计\" :key=\"key\">\r\n                        <text class=\"stat-type\">{{key}}</text>\r\n                        <text class=\"stat-count\">{{value}}</text>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- Totals -->\r\n            <view class=\"summary-section\">\r\n                <text class=\"section-header\">汇总统计</text>\r\n                <view class=\"totals-grid\">\r\n                    <view class=\"total-item\" v-for=\"(value, key) in summaryData.总计\" :key=\"key\">\r\n                        <text class=\"total-label\">{{key}}:</text>\r\n                        <text class=\"total-value\">{{value}}</text>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n\r\n            <!-- Detailed Items -->\r\n            <view class=\"summary-section\">\r\n                <text class=\"section-header\">详细条目 ({{summaryData.详细条目 ? summaryData.详细条目.length : 0}}项)</text>\r\n                <view class=\"details-list\">\r\n                    <view class=\"detail-item\" v-for=\"(item, index) in summaryData.详细条目\" :key=\"index\">\r\n                        <view class=\"detail-header\">\r\n                            <text class=\"detail-type\">{{item.类型}}</text>\r\n                        </view>\r\n                        <view class=\"detail-info\">\r\n                            <text class=\"detail-text\" v-if=\"item.材质\">材质: {{item.材质}}</text>\r\n                            <text class=\"detail-text\" v-if=\"item.位置 && item.位置 !== '-'\">位置: {{item.位置}}</text>\r\n                            <text class=\"detail-text\" v-if=\"item.规格 && item.规格 !== '-'\">规格: {{item.规格}}</text>\r\n                            <text class=\"detail-text\">数量: {{item.数量}}</text>\r\n                            <text class=\"detail-text\">频次: {{item.频次}}</text>\r\n                            <text class=\"detail-text\">照片: {{item.照片}}</text>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n        </scroll-view>\r\n\r\n        <view v-else class=\"loading\">\r\n            <text>加载中...</text>\r\n        </view>\r\n\r\n        <view class=\"footer\">\r\n            <button class=\"btn-back\" @click=\"goBack\">返回修改</button>\r\n            <button class=\"btn-confirm\" @click=\"confirmSave\">确认保存</button>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    const db = uniCloud.database()\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                summaryData: {\r\n                    基本信息: {},\r\n                    清洗范围统计: {},\r\n                    详细条目: [],\r\n                    总计: {}\r\n                },\r\n                formData: {},\r\n                specDetails: {},\r\n                multipleEntries: {},\r\n                currentLocation: null,\r\n                userInfo: {}\r\n            }\r\n        },\r\n\r\n        onLoad() {\r\n            // Get data passed from previous page\r\n            const eventChannel = this.getOpenerEventChannel()\r\n            eventChannel.on('previewData', (data) => {\r\n                this.summaryData = data.summaryData\r\n                this.formData = data.formData\r\n                this.specDetails = data.specDetails\r\n                this.multipleEntries = data.multipleEntries\r\n                this.currentLocation = data.currentLocation\r\n                this.userInfo = data.userInfo\r\n            })\r\n        },\r\n\r\n        methods: {\r\n            goBack() {\r\n                uni.navigateBack()\r\n            },\r\n\r\n            async confirmSave() {\r\n                try {\r\n                    uni.showLoading({\r\n                        title: '保存中...'\r\n                    })\r\n\r\n                    const record = {\r\n                        guishu: this.formData.guishu,\r\n                        tankanyuan: this.formData.tankanyuan,\r\n                        didian: this.formData.didian,\r\n                        mingcheng: this.formData.mingcheng,\r\n                        qingxifanwei: this.formData.qingxifanwei,\r\n                        environmentData: this.environmentData,\r\n                        specDetails: this.specDetails,\r\n                        multipleEntries: this.multipleEntries,\r\n                        summaryData: this.summaryData,\r\n                        location: this.currentLocation,\r\n                        userId: this.userInfo.userId,\r\n                        status: 'draft'\r\n                    }\r\n\r\n                    const result = await db.collection('tankan_records').add(record)\r\n                    uni.hideLoading()\r\n                    uni.showToast({\r\n                        title: '保存成功',\r\n                        icon: 'success'\r\n                    })\r\n\r\n                    setTimeout(() => {\r\n                        uni.navigateBack({\r\n                            delta: 2\r\n                        }) // Go back 2 pages to main form\r\n                    }, 1500)\r\n\r\n                } catch (error) {\r\n                    uni.hideLoading()\r\n                    console.error('保存失败:', error)\r\n                    uni.showToast({\r\n                        title: '保存失败: ' + error.message,\r\n                        icon: 'error'\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .container {\r\n        display: flex;\r\n        flex-direction: column;\r\n        height: 100vh;\r\n        background: #f5f6fa;\r\n    }\r\n\r\n    .header {\r\n        background: linear-gradient(135deg, #007AFF, #0056D6);\r\n        padding: 60rpx 30rpx 30rpx 30rpx;\r\n        color: white;\r\n\r\n        .title {\r\n            font-size: 40rpx;\r\n            font-weight: bold;\r\n            text-align: center;\r\n        }\r\n    }\r\n\r\n    .content {\r\n        flex: 1;\r\n        padding: 20rpx;\r\n    }\r\n\r\n    .summary-section {\r\n        background: white;\r\n        border-radius: 16rpx;\r\n        margin-bottom: 20rpx;\r\n        overflow: hidden;\r\n        box-shadow: 0 4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n    }\r\n\r\n    .section-header {\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        color: white;\r\n        background: linear-gradient(135deg, #007AFF, #0056D6);\r\n        padding: 25rpx 30rpx;\r\n        display: block;\r\n    }\r\n\r\n    .info-grid,\r\n    .stats-grid,\r\n    .totals-grid {\r\n        padding: 30rpx;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 15rpx;\r\n    }\r\n\r\n    .info-item,\r\n    .total-item {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 20rpx;\r\n        background: #f8f9fa;\r\n        border-radius: 12rpx;\r\n        border-left: 6rpx solid #007AFF;\r\n    }\r\n\r\n    .info-label,\r\n    .total-label {\r\n        font-size: 28rpx;\r\n        color: #6c757d;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .info-value,\r\n    .total-value {\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        font-weight: bold;\r\n        text-align: right;\r\n        max-width: 60%;\r\n    }\r\n\r\n    .stat-item {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 25rpx 30rpx;\r\n        border-bottom: 1rpx solid #f0f0f0;\r\n\r\n        &:last-child {\r\n            border-bottom: none;\r\n        }\r\n    }\r\n\r\n    .stat-type {\r\n        font-size: 30rpx;\r\n        color: #333;\r\n        font-weight: bold;\r\n    }\r\n\r\n    .stat-count {\r\n        font-size: 28rpx;\r\n        color: #007AFF;\r\n        font-weight: bold;\r\n    }\r\n\r\n    .details-list {\r\n        padding: 30rpx;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 20rpx;\r\n    }\r\n\r\n    .detail-item {\r\n        border: 2rpx solid #e9ecef;\r\n        border-radius: 12rpx;\r\n        overflow: hidden;\r\n        background: white;\r\n    }\r\n\r\n    .detail-header {\r\n        background: linear-gradient(135deg, #e3f2fd, #bbdefb);\r\n        padding: 20rpx 25rpx;\r\n    }\r\n\r\n    .detail-type {\r\n        font-size: 28rpx;\r\n        font-weight: bold;\r\n        color: #1976d2;\r\n    }\r\n\r\n    .detail-info {\r\n        padding: 25rpx;\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 12rpx;\r\n    }\r\n\r\n    .detail-text {\r\n        font-size: 26rpx;\r\n        color: #495057;\r\n        line-height: 1.4;\r\n\r\n        &:first-child {\r\n            font-weight: 500;\r\n            color: #333;\r\n        }\r\n    }\r\n\r\n    .footer {\r\n        display: flex;\r\n        gap: 30rpx;\r\n        padding: 30rpx;\r\n        background: white;\r\n        border-top: 1rpx solid #e9ecef;\r\n        box-shadow: 0 -4rpx 12rpx rgba(0, 0, 0, 0.1);\r\n    }\r\n\r\n    .btn-back,\r\n    .btn-confirm {\r\n        flex: 1;\r\n        height: 88rpx;\r\n        border-radius: 16rpx;\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        border: none;\r\n        transition: all 0.3s ease;\r\n    }\r\n\r\n    .btn-back {\r\n        background: linear-gradient(135deg, #6c757d, #5a6268);\r\n        color: white;\r\n\r\n        &:active {\r\n            transform: scale(0.98);\r\n            background: linear-gradient(135deg, #5a6268, #495057);\r\n        }\r\n    }\r\n\r\n    .btn-confirm {\r\n        background: linear-gradient(135deg, #28a745, #20c997);\r\n        color: white;\r\n\r\n        &:active {\r\n            transform: scale(0.98);\r\n            background: linear-gradient(135deg, #218838, #1ea67a);\r\n        }\r\n    }\r\n</style>","import MiniProgramPage from 'C:/Users/31110/Documents/HBuilderProjects/test/pages/site/preview.vue'\nwx.createPage(MiniProgramPage)"],"names":["uniCloud","uni"],"mappings":";;AAyEI,MAAM,KAAKA,cAAQ,GAAC,SAAS;AAE7B,MAAK,YAAU;AAAA,EACX,OAAO;AACH,WAAO;AAAA,MACH,aAAa;AAAA,QACT,MAAM,CAAE;AAAA,QACR,QAAQ,CAAE;AAAA,QACV,MAAM,CAAE;AAAA,QACR,IAAI,CAAC;AAAA,MACR;AAAA,MACD,UAAU,CAAE;AAAA,MACZ,aAAa,CAAE;AAAA,MACf,iBAAiB,CAAE;AAAA,MACnB,iBAAiB;AAAA,MACjB,UAAU,CAAC;AAAA,IACf;AAAA,EACH;AAAA,EAED,SAAS;AAEL,UAAM,eAAe,KAAK,sBAAsB;AAChD,iBAAa,GAAG,eAAe,CAAC,SAAS;AACrC,WAAK,cAAc,KAAK;AACxB,WAAK,WAAW,KAAK;AACrB,WAAK,cAAc,KAAK;AACxB,WAAK,kBAAkB,KAAK;AAC5B,WAAK,kBAAkB,KAAK;AAC5B,WAAK,WAAW,KAAK;AAAA,KACxB;AAAA,EACJ;AAAA,EAED,SAAS;AAAA,IACL,SAAS;AACLC,oBAAAA,MAAI,aAAa;AAAA,IACpB;AAAA,IAED,MAAM,cAAc;AAChB,UAAI;AACAA,sBAAAA,MAAI,YAAY;AAAA,UACZ,OAAO;AAAA,SACV;AAED,cAAM,SAAS;AAAA,UACX,QAAQ,KAAK,SAAS;AAAA,UACtB,YAAY,KAAK,SAAS;AAAA,UAC1B,QAAQ,KAAK,SAAS;AAAA,UACtB,WAAW,KAAK,SAAS;AAAA,UACzB,cAAc,KAAK,SAAS;AAAA,UAC5B,iBAAiB,KAAK;AAAA,UACtB,aAAa,KAAK;AAAA,UAClB,iBAAiB,KAAK;AAAA,UACtB,aAAa,KAAK;AAAA,UAClB,UAAU,KAAK;AAAA,UACf,QAAQ,KAAK,SAAS;AAAA,UACtB,QAAQ;AAAA,QACZ;AAEA,cAAM,SAAS,MAAM,GAAG,WAAW,gBAAgB,EAAE,IAAI,MAAM;AAC/DA,sBAAAA,MAAI,YAAY;AAChBA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,SACT;AAED,mBAAW,MAAM;AACbA,wBAAAA,MAAI,aAAa;AAAA,YACb,OAAO;AAAA,WACV;AAAA,QACJ,GAAE,IAAI;AAAA,MAET,SAAO,OAAO;AACZA,sBAAAA,MAAI,YAAY;AAChBA,sBAAAA,sDAAc,SAAS,KAAK;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO,WAAW,MAAM;AAAA,UACxB,MAAM;AAAA,SACT;AAAA,MACL;AAAA,IACJ;AAAA,EACJ;AACJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzJJ,GAAG,WAAW,eAAe;"}