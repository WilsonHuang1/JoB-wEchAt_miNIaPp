{"version":3,"file":"index.js","sources":["pages/site/index.vue","../../../Downloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc2l0ZS9pbmRleC52dWU"],"sourcesContent":["<template>\r\n    <view class=\"page-container\">\r\n        <!-- Sidebar -->\r\n        <view class=\"sidebar\" :class=\"{ 'sidebar-hidden': !sidebarVisible }\">\r\n            <view class=\"sidebar-content\">\r\n                <view class=\"step-nav\"\r\n                    :class=\"{ active: currentStep === 'preparation', completed: isStepCompleted('preparation') }\"\r\n                    @click=\"goToStep('preparation')\">1. 准备</view>\r\n                <view class=\"step-nav\"\r\n                    :class=\"{ active: currentStep === 'environment', completed: isStepCompleted('environment') }\"\r\n                    @click=\"goToStep('environment')\">2. 环境信息</view>\r\n                <view class=\"step-nav\"\r\n                    :class=\"{ active: currentStep === 'inspection', completed: isStepCompleted('inspection') }\"\r\n                    @click=\"goToStep('inspection')\">3. 踏勘</view>\r\n                <view class=\"step-nav\"\r\n                    :class=\"{ active: currentStep === 'completion', completed: isStepCompleted('completion') }\"\r\n                    @click=\"goToStep('completion')\">4. 完成</view>\r\n            </view>\r\n        </view>\r\n\r\n        <!-- Mini sidebar (when hidden) -->\r\n        <view class=\"mini-sidebar\" v-if=\"!sidebarVisible\">\r\n            <view class=\"mini-step\" @click=\"goToStep('preparation')\"\r\n                :class=\"{ active: currentStep === 'preparation', completed: isStepCompleted('preparation') }\">1</view>\r\n            <view class=\"mini-step\" @click=\"goToStep('environment')\"\r\n                :class=\"{ active: currentStep === 'environment', completed: isStepCompleted('environment') }\">2</view>\r\n            <view class=\"mini-step\" @click=\"goToStep('inspection')\"\r\n                :class=\"{ active: currentStep === 'inspection', completed: isStepCompleted('inspection') }\">3</view>\r\n            <view class=\"mini-step\" @click=\"goToStep('completion')\"\r\n                :class=\"{ active: currentStep === 'completion', completed: isStepCompleted('completion') }\">4</view>\r\n        </view>\r\n\r\n        <!-- Sidebar toggle button -->\r\n        <view class=\"sidebar-toggle\" @click=\"sidebarVisible = !sidebarVisible\">\r\n            <text>{{ sidebarVisible ? '◀' : '▶' }}</text>\r\n        </view>\r\n\r\n        <!-- Main Content -->\r\n        <view class=\"main-content\" :class=\"{ 'content-expanded': !sidebarVisible }\">\r\n            <view class=\"container\">\r\n                <view class=\"form-section\">\r\n                    <view class=\"section-title\">现场踏勘表单</view>\r\n\r\n                    <!-- Login status indicator -->\r\n                    <view class=\"login-status\">\r\n                        <text class=\"status-text\">已登录: {{userInfo.name}} ({{userInfo.company}})</text>\r\n                    </view>\r\n\r\n                    <!-- Preparation Step -->\r\n                    <view v-if=\"currentStep === 'preparation'\">\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">归属</text>\r\n                            <input class=\"input\" v-model=\"formData.guishu\" placeholder=\"请输入归属公司\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">踏勘人员</text>\r\n                            <input class=\"input\" v-model=\"formData.tankanyuan\" placeholder=\"请输入踏勘人员姓名\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">现场位置</text>\r\n                            <view class=\"location-display-box\">\r\n                                <text class=\"location-text\">{{ formData.address || '点击下方按钮获取位置' }}</text>\r\n                            </view>\r\n                            <button class=\"location-btn\" @click=\"getLocation\">选择位置</button>\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">名称</text>\r\n                            <input class=\"input\" v-model=\"formData.mingcheng\" placeholder=\"请输入名称\" />\r\n                        </view>\r\n\r\n                        <view class=\"button-group\">\r\n                            <button class=\"btn-save\" @click=\"proceedToEnvironment\">下一步：环境信息</button>\r\n                        </view>\r\n                    </view>\r\n\r\n                    <!-- Environment Information Step -->\r\n                    <view v-if=\"currentStep === 'environment'\">\r\n                        <view class=\"section-subtitle\">环境信息</view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">停车场入口及价格</text>\r\n                            <input class=\"input\" v-model=\"environmentData.parkingEntrance\"\r\n                                placeholder=\"请输入停车场入口及价格信息\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">建议停车位</text>\r\n                            <input class=\"input\" v-model=\"environmentData.recommendedParking\"\r\n                                placeholder=\"请输入建议停车位信息\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">电梯入口</text>\r\n                            <input class=\"input\" v-model=\"environmentData.elevatorEntrance\" placeholder=\"请输入电梯入口信息\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">建议路线</text>\r\n                            <input class=\"input\" v-model=\"environmentData.recommendedRoute\" placeholder=\"请输入建议路线信息\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">楼顶施工环境</text>\r\n                            <input class=\"input\" v-model=\"environmentData.rooftopEnvironment\"\r\n                                placeholder=\"请输入楼顶施工环境信息\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">取水电情况</text>\r\n                            <input class=\"input\" v-model=\"environmentData.waterElectricity\" placeholder=\"请输入取水电情况信息\" />\r\n                        </view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"label\">其他情况</text>\r\n                            <input class=\"input\" v-model=\"environmentData.otherConditions\" placeholder=\"请输入其他情况信息\" />\r\n                        </view>\r\n\r\n                        <view class=\"button-group\">\r\n                            <button class=\"btn-secondary\" @click=\"goBackToPreparation\">上一步</button>\r\n                            <button class=\"btn-save\" @click=\"proceedToInspection\">下一步：开始踏勘</button>\r\n                        </view>\r\n                    </view>\r\n\r\n                    <!-- Inspection Step -->\r\n                    <view v-if=\"currentStep === 'inspection'\">\r\n                        <view class=\"section-subtitle\">踏勘信息</view>\r\n\r\n                        <view class=\"form-group\">\r\n                            <text class=\"cleaning-scope-title\">清洗范围</text>\r\n                        </view>\r\n\r\n                        <!-- Display all added items first -->\r\n                        <view class=\"added-items-section\" v-if=\"addedItems.length > 0\">\r\n                            <view v-for=\"(item, index) in addedItems\" :key=\"index\" class=\"added-item\">\r\n                                <!-- Item header with remove button -->\r\n                                <view class=\"item-header\">\r\n                                    <text class=\"item-title\">{{item.type}} ({{index + 1}})</text>\r\n                                    <button class=\"remove-btn\" @click=\"removeItem(index)\">×</button>\r\n                                </view>\r\n\r\n                                <!-- Specs form for this item -->\r\n                                <view class=\"item-specs\">\r\n                                    <!-- 具体位置 (for 风机 and 其他) -->\r\n                                    <view class=\"spec-field\" v-if=\"needsField(item.type, 'position')\">\r\n                                        <text class=\"spec-label\">具体位置 *</text>\r\n                                        <input class=\"spec-input\" v-model=\"item.specs.position\" placeholder=\"请输入具体位置\" />\r\n                                    </view>\r\n\r\n                                    <!-- 型号规格 (required for all) -->\r\n                                    <view class=\"spec-field\">\r\n                                        <text class=\"spec-label\">型号规格 *</text>\r\n                                        <input class=\"spec-input\" v-model=\"item.specs.model\" placeholder=\"请输入型号规格\" />\r\n                                    </view>\r\n\r\n                                    <!-- 单位 (locked for specific options) -->\r\n                                    <view class=\"spec-field\">\r\n                                        <text class=\"spec-label\">单位 *</text>\r\n                                        <input class=\"spec-input\" v-model=\"item.specs.unit\" placeholder=\"请输入单位\"\r\n                                            :readonly=\"isUnitLocked(item.type)\" />\r\n                                    </view>\r\n\r\n                                    <!-- 数量 (required for all) -->\r\n                                    <view class=\"spec-field\">\r\n                                        <text class=\"spec-label\">数量 *</text>\r\n                                        <input class=\"spec-input\" v-model=\"item.specs.quantity\" placeholder=\"请输入数量\"\r\n                                            type=\"number\" />\r\n                                    </view>\r\n\r\n                                    <!-- 作业频次 (required for all) -->\r\n                                    <view class=\"spec-field\">\r\n                                        <text class=\"spec-label\">作业频次 *</text>\r\n                                        <input class=\"spec-input\" v-model=\"item.specs.frequency\"\r\n                                            placeholder=\"请输入作业频次\" />\r\n                                    </view>\r\n\r\n                                    <!-- 长度 (only for 厨房烟罩) -->\r\n                                    <view class=\"spec-field\" v-if=\"item.type === '厨房烟罩'\">\r\n                                        <text class=\"spec-label\">长度 *</text>\r\n                                        <input class=\"spec-input\" v-model=\"item.specs.length\" placeholder=\"请输入长度\"\r\n                                            type=\"number\" />\r\n                                        <text class=\"unit-indicator\">米(m)</text>\r\n                                    </view>\r\n\r\n                                    <!-- 拍照(清洗前) -->\r\n                                    <view class=\"spec-field\">\r\n                                        <text class=\"spec-label\">拍照(清洗前) *</text>\r\n                                        <button class=\"photo-btn-add\" @click=\"takePhoto(index, 'before')\">📷\r\n                                            添加照片</button>\r\n                                        <view class=\"photo-preview-grid\" v-if=\"item.specs.photoBefore.length > 0\">\r\n                                            <view class=\"photo-item\"\r\n                                                v-for=\"(photo, photoIndex) in item.specs.photoBefore\" :key=\"photoIndex\">\r\n                                                <image class=\"photo-image\" :src=\"photo\" mode=\"aspectFill\"></image>\r\n                                                <view class=\"photo-delete\"\r\n                                                    @click=\"deletePhoto(index, 'before', photoIndex)\">×</view>\r\n                                            </view>\r\n                                        </view>\r\n                                    </view>\r\n                                </view>\r\n                            </view>\r\n                        </view>\r\n\r\n                        <!-- Clickable dropdown at the bottom -->\r\n                        <view class=\"add-item-section\">\r\n                            <view class=\"dropdown-container\">\r\n                                <view class=\"dropdown-header\" @click=\"toggleDropdown\">\r\n                                    <text>添加清洗项目</text>\r\n                                    <text class=\"dropdown-arrow\" :class=\"{ rotated: isDropdownOpen }\">▼</text>\r\n                                </view>\r\n\r\n                                <view class=\"dropdown-options\" v-if=\"isDropdownOpen\">\r\n                                    <view v-for=\"(scope, index) in availableScopes\" :key=\"index\" class=\"dropdown-option\"\r\n                                        @click=\"selectScope(scope)\">\r\n                                        <text>{{scope}}</text>\r\n                                    </view>\r\n                                </view>\r\n                            </view>\r\n                        </view>\r\n\r\n                        <view class=\"button-group\">\r\n                            <button class=\"btn-secondary\" @click=\"goBackToEnvironment\">上一步</button>\r\n                            <button class=\"btn-save\" @click=\"proceedToCompletion\">下一步：完成踏勘</button>\r\n                        </view>\r\n                    </view>\r\n\r\n                    <!-- Completion Step -->\r\n                    <view v-if=\"currentStep === 'completion'\">\r\n                        <view class=\"section-subtitle\">踏勘完成</view>\r\n\r\n                        <view class=\"completion-section\">\r\n                            <view class=\"summary-section\">\r\n                                <text class=\"summary-title\">踏勘摘要</text>\r\n                                <view class=\"summary-item\">\r\n                                    <text class=\"summary-label\">名称：</text>\r\n                                    <text class=\"summary-value\">{{formData.mingcheng}}</text>\r\n                                </view>\r\n                                <view class=\"summary-item\">\r\n                                    <text class=\"summary-label\">地点：</text>\r\n                                    <text class=\"summary-value\">{{formData.address}}</text>\r\n                                </view>\r\n                                <view class=\"summary-item\">\r\n                                    <text class=\"summary-label\">踏勘人员：</text>\r\n                                    <text class=\"summary-value\">{{formData.tankanyuan}}</text>\r\n                                </view>\r\n                                <view class=\"summary-item\">\r\n                                    <text class=\"summary-label\">归属：</text>\r\n                                    <text class=\"summary-value\">{{formData.guishu}}</text>\r\n                                </view>\r\n                                <view class=\"summary-item\">\r\n                                    <text class=\"summary-label\">清洗范围：</text>\r\n                                    <text class=\"summary-value\">{{getCleaningSummary()}}</text>\r\n                                </view>\r\n                            </view>\r\n\r\n                            <view class=\"document-generation\">\r\n                                <text class=\"doc-title\">文档生成</text>\r\n                                <view class=\"doc-status\" v-if=\"documentGenerating\">\r\n                                    <text>正在生成踏勘报告...</text>\r\n                                </view>\r\n                                <view class=\"doc-actions\" v-else>\r\n                                    <button class=\"doc-btn\" @click=\"generateDocument\">生成踏勘报告</button>\r\n                                    <button class=\"doc-btn\" @click=\"previewDocument\"\r\n                                        v-if=\"documentGenerated\">预览报告</button>\r\n                                </view>\r\n                            </view>\r\n                        </view>\r\n\r\n                        <view class=\"button-group\">\r\n                            <button class=\"btn-secondary\" @click=\"goBackToInspection\">返回修改</button>\r\n                            <button class=\"btn-save\" @click=\"save\">保存并结束</button>\r\n                        </view>\r\n                    </view>\r\n                </view>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                currentStep: 'preparation', // preparation, environment, inspection, completion\r\n                documentGenerating: false,\r\n                documentGenerated: false,\r\n                isDropdownOpen: false,\r\n                sidebarVisible: true,\r\n\r\n                // Missing properties for step 3\r\n                qingxifanwei: [],\r\n                cleaningOptions: [{\r\n                        value: 'hengguanshuguanxitong',\r\n                        label: '横管竖管系统'\r\n                    },\r\n                    {\r\n                        value: 'fengji',\r\n                        label: '风机'\r\n                    },\r\n                    {\r\n                        value: 'jinghuaqi',\r\n                        label: '净化器'\r\n                    },\r\n                    {\r\n                        value: 'chufangyanzao',\r\n                        label: '厨房烟罩'\r\n                    },\r\n                    {\r\n                        value: 'qita',\r\n                        label: '其他'\r\n                    }\r\n                ],\r\n                specDetails: {},\r\n                pipeEntries: [{\r\n                    diameter: '',\r\n                    length: '',\r\n                    note: ''\r\n                }],\r\n\r\n                availableScopes: ['横管', '竖管', '风机', '净化器', '厨房烟罩', '其他'],\r\n                addedItems: [], // Array to store all added cleaning items\r\n                userInfo: {\r\n                    name: '',\r\n                    company: '',\r\n                    isLoggedIn: false\r\n                },\r\n                formData: {\r\n                    guishu: '',\r\n                    didian: '',\r\n                    tankanyuan: '',\r\n                    address: '',\r\n                    latitude: '',\r\n                    longitude: '',\r\n                    mingcheng: ''\r\n                },\r\n                environmentData: {\r\n                    parkingEntrance: '',\r\n                    recommendedParking: '',\r\n                    elevatorEntrance: '',\r\n                    recommendedRoute: '',\r\n                    rooftopEnvironment: '',\r\n                    waterElectricity: '',\r\n                    otherConditions: ''\r\n                },\r\n            };\r\n        },\r\n        computed: {\r\n            progressWidth() {\r\n                const steps = ['preparation', 'environment', 'inspection', 'completion'];\r\n                const currentIndex = steps.indexOf(this.currentStep);\r\n                return `${(currentIndex / (steps.length - 1)) * 100}%`;\r\n            },\r\n            selectedCleaningOptions() {\r\n                return this.qingxifanwei;\r\n            }\r\n        },\r\n        onLoad() {\r\n            // Get user info from storage\r\n            this.userInfo = uni.getStorageSync('userInfo') || {};\r\n            if (!this.userInfo.isLoggedIn) {\r\n                // If no user info, go back to main page\r\n                uni.navigateBack();\r\n                return;\r\n            }\r\n            // Auto-fill form fields\r\n            this.formData.guishu = this.userInfo.company;\r\n            this.formData.tankanyuan = this.userInfo.name;\r\n        },\r\n        methods: {\r\n            // Step navigation and completion\r\n            goToStep(targetStep) {\r\n                this.currentStep = targetStep;\r\n            },\r\n\r\n            isStepCompleted(step) {\r\n                switch (step) {\r\n                    case 'preparation':\r\n                        return this.formData.guishu &&\r\n                            this.formData.tankanyuan &&\r\n                            this.formData.address &&\r\n                            this.formData.mingcheng;\r\n\r\n                    case 'environment':\r\n                        // Check if at least some environment fields are filled\r\n                        return this.environmentData.parkingEntrance ||\r\n                            this.environmentData.recommendedParking ||\r\n                            this.environmentData.elevatorEntrance ||\r\n                            this.environmentData.recommendedRoute ||\r\n                            this.environmentData.rooftopEnvironment ||\r\n                            this.environmentData.waterElectricity ||\r\n                            this.environmentData.otherConditions;\r\n\r\n                    case 'inspection':\r\n                        // Check if at least one item is added with complete specs\r\n                        if (this.addedItems.length === 0) return false;\r\n\r\n                        return this.addedItems.some(item => {\r\n                            const specs = item.specs;\r\n                            let isComplete = specs.model && specs.unit && specs.quantity && specs.frequency;\r\n\r\n                            // Additional checks for specific types\r\n                            if (item.type === '厨房烟罩') {\r\n                                isComplete = isComplete && specs.length;\r\n                            }\r\n                            if (this.needsField(item.type, 'position')) {\r\n                                isComplete = isComplete && specs.position;\r\n                            }\r\n\r\n                            return isComplete && specs.photoBefore.length > 0;\r\n                        });\r\n\r\n                    case 'completion':\r\n                        // Completion step is only complete when all previous steps are done\r\n                        return this.isStepCompleted('preparation') &&\r\n                            this.isStepCompleted('environment') &&\r\n                            this.isStepCompleted('inspection');\r\n\r\n                    default:\r\n                        return false;\r\n                }\r\n            },\r\n\r\n            // Step navigation methods\r\n            proceedToEnvironment() {\r\n                if (!this.formData.guishu || !this.formData.tankanyuan || !this.formData.address || !this.formData\r\n                    .mingcheng) {\r\n                    uni.showToast({\r\n                        title: '请完善基础信息',\r\n                        icon: 'none'\r\n                    });\r\n                    return;\r\n                }\r\n                this.currentStep = 'environment';\r\n            },\r\n\r\n            goBackToPreparation() {\r\n                this.currentStep = 'preparation';\r\n            },\r\n\r\n            proceedToInspection() {\r\n                this.currentStep = 'inspection';\r\n            },\r\n\r\n            goBackToEnvironment() {\r\n                this.currentStep = 'environment';\r\n            },\r\n\r\n            proceedToCompletion() {\r\n                if (this.addedItems.length === 0) {\r\n                    uni.showToast({\r\n                        title: '请选择至少一个清洗范围',\r\n                        icon: 'none'\r\n                    });\r\n                    return;\r\n                }\r\n                this.currentStep = 'completion';\r\n            },\r\n\r\n            goBackToInspection() {\r\n                this.currentStep = 'inspection';\r\n            },\r\n\r\n            // New methods for step 3 functionality\r\n            toggleCleaningOption(value) {\r\n                const index = this.qingxifanwei.indexOf(value);\r\n                if (index > -1) {\r\n                    this.qingxifanwei.splice(index, 1);\r\n                    delete this.specDetails[value];\r\n                } else {\r\n                    this.qingxifanwei.push(value);\r\n                    // Use Vue.set or this.$set to make it reactive\r\n                    this.$set(this.specDetails, value, {\r\n                        quantity: '',\r\n                        specification: '',\r\n                        unit: ''\r\n                    });\r\n                }\r\n                // Force reactivity update\r\n                this.$forceUpdate();\r\n            },\r\n\r\n            getOptionLabel(option) {\r\n                const found = this.cleaningOptions.find(opt => opt.value === option);\r\n                return found ? found.label : option;\r\n            },\r\n\r\n            getSummaryText(option) {\r\n                if (option === 'hengguanshuguanxitong') {\r\n                    return `${this.pipeEntries.length}条管道`;\r\n                }\r\n                const specs = this.specDetails[option];\r\n                if (!specs) return '';\r\n                return `${specs.quantity || 0} ${specs.unit || ''}`;\r\n            },\r\n\r\n            addPipeEntry() {\r\n                this.pipeEntries.push({\r\n                    diameter: '',\r\n                    length: '',\r\n                    note: ''\r\n                });\r\n            },\r\n\r\n            removePipeEntry(index) {\r\n                if (this.pipeEntries.length > 1) {\r\n                    this.pipeEntries.splice(index, 1);\r\n                }\r\n            },\r\n\r\n            submitInspection() {\r\n                this.save();\r\n            },\r\n\r\n            getCleaningSummary() {\r\n                if (this.addedItems.length === 0) return '无';\r\n\r\n                const summary = {};\r\n                this.addedItems.forEach(item => {\r\n                    if (summary[item.type]) {\r\n                        summary[item.type]++;\r\n                    } else {\r\n                        summary[item.type] = 1;\r\n                    }\r\n                });\r\n\r\n                return Object.entries(summary).map(([type, count]) =>\r\n                    count > 1 ? `${type}(${count}个)` : type\r\n                ).join(', ');\r\n            },\r\n\r\n            // Location method\r\n            getLocation() {\r\n                uni.chooseLocation({\r\n                    success: (res) => {\r\n                        console.log('选择的位置:', res);\r\n                        this.formData.latitude = res.latitude;\r\n                        this.formData.longitude = res.longitude;\r\n                        this.formData.address = res.address + ' ' + res.name;\r\n\r\n                        uni.showToast({\r\n                            title: '位置选择成功',\r\n                            icon: 'success'\r\n                        });\r\n                    },\r\n                    fail: (err) => {\r\n                        console.error('位置选择失败:', err);\r\n                    }\r\n                });\r\n            },\r\n\r\n            removeItem(index) {\r\n                this.addedItems.splice(index, 1);\r\n                if (this.addedItems.length === 0) {\r\n                    this.showAddDropdown = true; // Show dropdown if no items\r\n                }\r\n            },\r\n\r\n            createDefaultSpecs(type) {\r\n                let defaultUnit = '';\r\n                if (['横管', '竖管'].includes(type)) defaultUnit = '米(m)';\r\n                else if (['风机', '净化器'].includes(type)) defaultUnit = '台';\r\n                else if (type === '厨房烟罩') defaultUnit = '个';\r\n\r\n                return {\r\n                    position: '',\r\n                    model: '',\r\n                    unit: defaultUnit,\r\n                    quantity: '',\r\n                    frequency: '',\r\n                    length: '',\r\n                    photoBefore: []\r\n                };\r\n            },\r\n\r\n            isUnitLocked(option) {\r\n                return ['横管', '竖管', '风机', '净化器', '厨房烟罩'].includes(option);\r\n            },\r\n\r\n            toggleDropdown() {\r\n                console.log('Dropdown clicked, current state:', this.isDropdownOpen); // Add this debug line\r\n                this.isDropdownOpen = !this.isDropdownOpen;\r\n            },\r\n\r\n            selectScope(scope) {\r\n                console.log('Selected scope:', scope); // Add this debug line\r\n                this.addNewItem(scope);\r\n                this.isDropdownOpen = false;\r\n            },\r\n\r\n            addNewItem(type) {\r\n                this.addedItems.push({\r\n                    type: type,\r\n                    specs: this.createDefaultSpecs(type)\r\n                });\r\n            },\r\n\r\n            needsField(option, field) {\r\n                const fieldRequirements = {\r\n                    '横管': ['model', 'unit', 'quantity', 'frequency', 'photoBefore'],\r\n                    '竖管': ['model', 'unit', 'quantity', 'frequency', 'photoBefore'],\r\n                    '风机': ['position', 'model', 'unit', 'quantity', 'frequency', 'photoBefore'],\r\n                    '净化器': ['model', 'unit', 'quantity', 'frequency', 'photoBefore'],\r\n                    '厨房烟罩': ['model', 'unit', 'quantity', 'frequency', 'length', 'photoBefore'],\r\n                    '其他': ['position', 'model', 'unit', 'quantity', 'frequency', 'photoBefore']\r\n                };\r\n\r\n                return fieldRequirements[option] && fieldRequirements[option].includes(field);\r\n            },\r\n\r\n            takePhoto(itemIndex, type) {\r\n                uni.chooseImage({\r\n                    count: 9,\r\n                    sizeType: ['original', 'compressed'],\r\n                    sourceType: ['album', 'camera'],\r\n                    success: (res) => {\r\n                        const specs = this.addedItems[itemIndex].specs;\r\n                        if (type === 'before') {\r\n                            specs.photoBefore.push(...res.tempFilePaths);\r\n                        }\r\n                        uni.showToast({\r\n                            title: `已添加${res.tempFilePaths.length}张照片`,\r\n                            icon: 'success'\r\n                        });\r\n                    },\r\n                    fail: (err) => {\r\n                        console.log('拍照失败', err);\r\n                        uni.showToast({\r\n                            title: '拍照失败',\r\n                            icon: 'none'\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n\r\n            deletePhoto(itemIndex, type, photoIndex) {\r\n                const specs = this.addedItems[itemIndex].specs;\r\n                if (type === 'before') {\r\n                    specs.photoBefore.splice(photoIndex, 1);\r\n                }\r\n                uni.showToast({\r\n                    title: '照片已删除',\r\n                    icon: 'success'\r\n                });\r\n            },\r\n\r\n            // // Document generation methods\r\n            // generateDocument() {\r\n            //     this.documentGenerating = true;\r\n\r\n            //     setTimeout(() => {\r\n            //         this.documentGenerating = false;\r\n            //         this.documentGenerated = true;\r\n            //         uni.showToast({\r\n            //             title: '踏勘报告生成完成',\r\n            //             icon: 'success'\r\n            //         });\r\n            //     }, 3000);\r\n            // },\r\n\r\n            previewDocument() {\r\n                uni.showToast({\r\n                    title: '打开报告预览',\r\n                    icon: 'success'\r\n                });\r\n            },\r\n\r\n            async uploadPhotos() {\r\n                const uploadedPhotos = [];\r\n\r\n                for (let item of this.addedItems) {\r\n                    const uploadedBeforePhotos = [];\r\n\r\n                    for (let photoPath of item.specs.photoBefore) {\r\n                        try {\r\n                            const result = await uniCloud.uploadFile({\r\n                                filePath: photoPath,\r\n                                cloudPath: `tankan/${Date.now()}_${Math.random().toString(36).slice(2)}.jpg`\r\n                            });\r\n                            uploadedBeforePhotos.push(result.fileID);\r\n                        } catch (error) {\r\n                            console.error('照片上传失败:', error);\r\n                        }\r\n                    }\r\n\r\n                    uploadedPhotos.push({\r\n                        type: item.type,\r\n                        specs: {\r\n                            ...item.specs,\r\n                            photoBefore: uploadedBeforePhotos\r\n                        }\r\n                    });\r\n                }\r\n\r\n                return uploadedPhotos;\r\n            },\r\n\r\n            // Save method\r\n            async save() {\r\n                try {\r\n                    uni.showLoading({\r\n                        title: '上传照片中...'\r\n                    });\r\n\r\n                    // Upload photos first\r\n                    const uploadedItems = await this.uploadPhotos();\r\n\r\n                    uni.showLoading({\r\n                        title: '保存数据中...'\r\n                    });\r\n\r\n                    const db = uniCloud.database();\r\n\r\n                    if (!this.formData.latitude) {\r\n                        uni.hideLoading();\r\n                        uni.showToast({\r\n                            title: '请先选择位置',\r\n                            icon: 'none'\r\n                        });\r\n                        return;\r\n                    }\r\n\r\n                    const completeData = {\r\n                        guishu: this.formData.guishu,\r\n                        tankanyuan: this.formData.tankanyuan,\r\n                        didian: this.formData.address,\r\n                        mingcheng: this.formData.mingcheng,\r\n                        environmentData: this.environmentData,\r\n                        qingxifanwei: uploadedItems, // Everything in one place now\r\n                        multipleEntries: {},\r\n                        location: {\r\n                            latitude: this.formData.latitude,\r\n                            longitude: this.formData.longitude,\r\n                            address: this.formData.address\r\n                        },\r\n                        userId: uni.getStorageSync('userId') || 'temp_user',\r\n                        status: 'submitted'\r\n                    };\r\n\r\n                    const result = await db.collection('tankan_records').add(completeData);\r\n\r\n                    uni.hideLoading();\r\n                    uni.showToast({\r\n                        title: '踏勘数据上传成功',\r\n                        icon: 'success'\r\n                    });\r\n\r\n                    setTimeout(() => {\r\n                        uni.navigateBack();\r\n                    }, 1500);\r\n\r\n                } catch (error) {\r\n                    uni.hideLoading();\r\n                    console.error('保存失败:', error);\r\n                    uni.showToast({\r\n                        title: '保存失败: ' + error.message,\r\n                        icon: 'none'\r\n                    });\r\n                }\r\n            },\r\n\r\n            goBack() {\r\n                uni.navigateBack();\r\n            }\r\n        }\r\n    };\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .page-container {\r\n        position: relative;\r\n        min-height: 100vh;\r\n    }\r\n\r\n    .sidebar {\r\n        position: fixed;\r\n        left: 0;\r\n        top: 0;\r\n        width: 300rpx;\r\n        height: 100vh;\r\n        background: #f5f5f5;\r\n        box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);\r\n        z-index: 1000;\r\n        transition: width 0.3s ease;\r\n\r\n        &.sidebar-hidden {\r\n            width: 80rpx;\r\n        }\r\n    }\r\n\r\n    .sidebar-content {\r\n        padding: 40rpx 20rpx;\r\n        padding-top: 100rpx;\r\n        opacity: 1;\r\n        transition: opacity 0.3s ease;\r\n\r\n        .sidebar-hidden & {\r\n            opacity: 0;\r\n            pointer-events: none;\r\n        }\r\n    }\r\n\r\n    .step-nav {\r\n        padding: 30rpx 20rpx;\r\n        margin-bottom: 20rpx;\r\n        border-radius: 12rpx;\r\n        background-color: #e0e0e0;\r\n        color: #666;\r\n        cursor: pointer;\r\n        transition: all 0.3s ease;\r\n        text-align: center;\r\n        font-size: 28rpx;\r\n\r\n        &:hover {\r\n            background-color: #d0d0d0;\r\n            transform: translateX(10rpx);\r\n        }\r\n\r\n        &.active {\r\n            background-color: #007AFF;\r\n            color: white;\r\n\r\n            // Remove the completed styling when active but not completed\r\n            &:not(.completed) {\r\n                &::after {\r\n                    display: none;\r\n                }\r\n            }\r\n        }\r\n\r\n        &.completed {\r\n            background-color: #4CAF50;\r\n            color: white;\r\n            position: relative;\r\n\r\n            &::after {\r\n                content: '✓';\r\n                position: absolute;\r\n                top: -8rpx;\r\n                right: -8rpx;\r\n                background-color: #2E7D32;\r\n                color: white;\r\n                border-radius: 50%;\r\n                width: 30rpx;\r\n                height: 30rpx;\r\n                font-size: 18rpx;\r\n                display: flex;\r\n                align-items: center;\r\n                justify-content: center;\r\n            }\r\n        }\r\n    }\r\n\r\n    .mini-sidebar {\r\n        position: fixed;\r\n        left: 0;\r\n        top: 0;\r\n        width: 80rpx;\r\n        height: 100vh;\r\n        background: #f5f5f5;\r\n        z-index: 1001;\r\n        display: flex;\r\n        flex-direction: column;\r\n        justify-content: center;\r\n        align-items: center;\r\n        opacity: 0;\r\n        transition: opacity 0.3s ease;\r\n        pointer-events: none;\r\n\r\n        .sidebar-hidden~& {\r\n            opacity: 1;\r\n            pointer-events: all;\r\n        }\r\n    }\r\n\r\n    .mini-step {\r\n        width: 50rpx;\r\n        height: 50rpx;\r\n        border-radius: 50%;\r\n        background-color: #e0e0e0;\r\n        color: #666;\r\n        margin-bottom: 20rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 22rpx;\r\n        cursor: pointer;\r\n        transition: all 0.3s ease;\r\n\r\n        &:hover {\r\n            background-color: #d0d0d0;\r\n            transform: scale(1.1);\r\n        }\r\n\r\n        &.active {\r\n            background-color: #007AFF;\r\n            color: white;\r\n        }\r\n\r\n        &.completed {\r\n            background-color: #4CAF50;\r\n            color: white;\r\n        }\r\n    }\r\n\r\n    .sidebar-toggle {\r\n        position: fixed;\r\n        left: 20rpx;\r\n        top: 20rpx;\r\n        width: 50rpx;\r\n        height: 50rpx;\r\n        background-color: #666;\r\n        color: white;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        cursor: pointer;\r\n        z-index: 1002;\r\n        box-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.2);\r\n\r\n        &:hover {\r\n            background-color: #555;\r\n        }\r\n    }\r\n\r\n    .main-content {\r\n        margin-left: 300rpx;\r\n        transition: margin-left 0.3s ease;\r\n\r\n        &.content-expanded {\r\n            margin-left: 80rpx;\r\n        }\r\n    }\r\n\r\n    .container {\r\n        padding: 20rpx;\r\n        background-color: #f5f5f5;\r\n        min-height: 100vh;\r\n        width: 100%;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .form-section {\r\n        background: white;\r\n        border-radius: 16rpx;\r\n        padding: 30rpx;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .section-title {\r\n        font-size: 36rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n        margin-bottom: 30rpx;\r\n        text-align: center;\r\n    }\r\n\r\n    .section-subtitle {\r\n        font-size: 32rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .login-status {\r\n        background-color: #e8f5e8;\r\n        padding: 20rpx;\r\n        border-radius: 8rpx;\r\n        margin-bottom: 30rpx;\r\n        text-align: center;\r\n    }\r\n\r\n    .status-text {\r\n        color: #2e7d32;\r\n        font-size: 26rpx;\r\n    }\r\n\r\n    .form-group {\r\n        margin-bottom: 30rpx;\r\n\r\n        &.small {\r\n            flex: 1;\r\n            margin-right: 20rpx;\r\n\r\n            &:last-child {\r\n                margin-right: 0;\r\n            }\r\n        }\r\n    }\r\n\r\n    .form-row {\r\n        display: flex;\r\n        gap: 20rpx;\r\n    }\r\n\r\n    .label {\r\n        display: block;\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        margin-bottom: 10rpx;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .input {\r\n        width: 100%;\r\n        min-height: 80rpx;\r\n        padding: 0 25rpx;\r\n        border: 2rpx solid #e5e5e5;\r\n        border-radius: 12rpx;\r\n        font-size: 32rpx;\r\n        line-height: 1.2;\r\n        vertical-align: middle;\r\n        background-color: #fafafa;\r\n        box-sizing: border-box;\r\n\r\n        &:focus {\r\n            border-color: #007AFF;\r\n            background-color: white;\r\n        }\r\n    }\r\n\r\n    .textarea {\r\n        width: 100%;\r\n        min-height: 120rpx;\r\n        padding: 25rpx;\r\n        border: 2rpx solid #e5e5e5;\r\n        border-radius: 12rpx;\r\n        font-size: 32rpx;\r\n        line-height: 1.5;\r\n        background-color: #fafafa;\r\n        box-sizing: border-box;\r\n        resize: vertical;\r\n\r\n        &:focus {\r\n            border-color: #007AFF;\r\n            background-color: white;\r\n        }\r\n    }\r\n\r\n    .location-wrapper {\r\n        display: flex;\r\n        gap: 10rpx;\r\n    }\r\n\r\n    .location-input {\r\n        flex: 1;\r\n    }\r\n\r\n    .location-btn {\r\n        padding: 20rpx;\r\n        background-color: #007AFF;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 12rpx;\r\n        font-size: 28rpx;\r\n    }\r\n\r\n    .checkbox-group {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 20rpx;\r\n    }\r\n\r\n    .checkbox-item {\r\n        display: flex;\r\n        align-items: center;\r\n        gap: 15rpx;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .checkbox-text {\r\n        font-size: 28rpx;\r\n        color: #333;\r\n    }\r\n\r\n    .spec-section {\r\n        background-color: #f8f8f8;\r\n        padding: 25rpx;\r\n        border-radius: 12rpx;\r\n        margin-bottom: 25rpx;\r\n    }\r\n\r\n    .spec-title {\r\n        font-size: 28rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .multi-entry-section {\r\n        margin-top: 20rpx;\r\n    }\r\n\r\n    .entry-header {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .entry-title {\r\n        font-size: 26rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n    }\r\n\r\n    .btn-add {\r\n        padding: 10rpx 20rpx;\r\n        background-color: #28a745;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 8rpx;\r\n        font-size: 24rpx;\r\n        cursor: pointer;\r\n\r\n        &:hover {\r\n            background-color: #218838;\r\n        }\r\n    }\r\n\r\n    .entry-item {\r\n        border: 1rpx solid #e0e0e0;\r\n        border-radius: 8rpx;\r\n        padding: 20rpx;\r\n        margin-bottom: 20rpx;\r\n        background-color: white;\r\n    }\r\n\r\n    .entry-controls {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-bottom: 15rpx;\r\n    }\r\n\r\n    .entry-number {\r\n        font-size: 26rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n    }\r\n\r\n    .btn-remove {\r\n        padding: 5rpx 15rpx;\r\n        background-color: #dc3545;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 6rpx;\r\n        font-size: 22rpx;\r\n        cursor: pointer;\r\n\r\n        &:hover {\r\n            background-color: #c82333;\r\n        }\r\n    }\r\n\r\n    .summary-section {\r\n        background-color: #f0f8ff;\r\n        padding: 25rpx;\r\n        border-radius: 12rpx;\r\n        margin-bottom: 30rpx;\r\n    }\r\n\r\n    .summary-item {\r\n        display: flex;\r\n        margin-bottom: 15rpx;\r\n        align-items: center;\r\n    }\r\n\r\n    .summary-label {\r\n        font-size: 26rpx;\r\n        color: #666;\r\n        min-width: 150rpx;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .summary-value {\r\n        font-size: 26rpx;\r\n        color: #333;\r\n        flex: 1;\r\n    }\r\n\r\n    .summary-card {\r\n        background-color: #f8f9fa;\r\n        border-radius: 12rpx;\r\n        padding: 25rpx;\r\n        margin-bottom: 25rpx;\r\n        border-left: 4rpx solid #007AFF;\r\n    }\r\n\r\n    .card-title {\r\n        font-size: 30rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n        margin-bottom: 20rpx;\r\n        border-bottom: 1rpx solid #e0e0e0;\r\n        padding-bottom: 10rpx;\r\n    }\r\n\r\n    .info-row {\r\n        display: flex;\r\n        margin-bottom: 15rpx;\r\n        align-items: flex-start;\r\n    }\r\n\r\n    .info-label {\r\n        font-size: 26rpx;\r\n        color: #666;\r\n        min-width: 150rpx;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .info-value {\r\n        font-size: 26rpx;\r\n        color: #333;\r\n        flex: 1;\r\n        word-break: break-word;\r\n    }\r\n\r\n    .button-group {\r\n        display: flex;\r\n        gap: 20rpx;\r\n        margin-top: 40rpx;\r\n    }\r\n\r\n    .btn-save,\r\n    .btn-secondary,\r\n    .btn-submit {\r\n        flex: 1;\r\n        padding: 24rpx 0;\r\n        border-radius: 12rpx;\r\n        font-size: 32rpx;\r\n        border: none;\r\n        cursor: pointer;\r\n        transition: all 0.3s ease;\r\n\r\n        &:active {\r\n            transform: translateY(1rpx);\r\n        }\r\n\r\n        &:disabled {\r\n            background-color: #ccc;\r\n            color: #999;\r\n            cursor: not-allowed;\r\n        }\r\n    }\r\n\r\n    .btn-save {\r\n        background-color: #007AFF;\r\n        color: white;\r\n\r\n        &:hover {\r\n            background-color: #0066CC;\r\n        }\r\n    }\r\n\r\n    .btn-secondary {\r\n        flex: 0.6; // Make it smaller than flex: 1\r\n        padding: 20rpx 0; // Reduce padding\r\n        background-color: #f0f0f0;\r\n        color: #666;\r\n        font-size: 28rpx; // Slightly smaller font\r\n\r\n        &:hover {\r\n            background-color: #e0e0e0;\r\n        }\r\n    }\r\n\r\n    .btn-submit {\r\n        background-color: #28a745;\r\n        color: white;\r\n\r\n        &:hover {\r\n            background-color: #218838;\r\n        }\r\n    }\r\n\r\n    // Add these styles to make the dropdown and items more visible\r\n    .added-item {\r\n        border: 1rpx solid #e0e0e0;\r\n        border-radius: 8rpx;\r\n        padding: 20rpx;\r\n        margin-bottom: 15rpx;\r\n        background-color: #fafafa;\r\n    }\r\n\r\n    .item-header {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        margin-bottom: 15rpx;\r\n        padding-bottom: 10rpx;\r\n        border-bottom: 1rpx solid #e0e0e0;\r\n        position: relative;\r\n    }\r\n\r\n    .remove-btn {\r\n        width: 50rpx;\r\n        height: 50rpx;\r\n        background-color: #999;\r\n        color: white;\r\n        border: none;\r\n        border-radius: 8rpx;\r\n        font-size: 32rpx;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        cursor: pointer;\r\n        position: absolute;\r\n        right: 0rpx;\r\n        top: 0rpx;\r\n\r\n        &:active {\r\n            background-color: #666;\r\n        }\r\n    }\r\n\r\n    .item-title {\r\n        font-size: 28rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n    }\r\n\r\n    .item-specs {\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 15rpx;\r\n    }\r\n\r\n    .spec-field {\r\n        display: flex;\r\n        flex-direction: column;\r\n    }\r\n\r\n    .spec-label {\r\n        font-size: 26rpx;\r\n        color: #333;\r\n        margin-bottom: 8rpx;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .spec-input {\r\n        width: 100%;\r\n        height: 70rpx;\r\n        padding: 0 20rpx;\r\n        border: 1rpx solid #ddd;\r\n        border-radius: 6rpx;\r\n        font-size: 28rpx;\r\n        background-color: white;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .dropdown-container {\r\n        border: 2rpx solid #007AFF; // Make it more prominent\r\n        border-radius: 12rpx;\r\n        background-color: white;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .dropdown-header {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        align-items: center;\r\n        padding: 25rpx 20rpx; // Increase padding\r\n        cursor: pointer;\r\n        font-size: 30rpx; // Larger font\r\n        font-weight: bold;\r\n        color: #007AFF;\r\n\r\n        &:active {\r\n            background-color: #f0f8ff;\r\n        }\r\n    }\r\n\r\n    .dropdown-arrow {\r\n        font-size: 24rpx;\r\n        color: #007AFF;\r\n        transition: transform 0.3s ease;\r\n\r\n        &.rotated {\r\n            transform: rotate(180deg);\r\n        }\r\n    }\r\n\r\n    .dropdown-option {\r\n        padding: 20rpx;\r\n        border-bottom: 1rpx solid #f0f0f0;\r\n        cursor: pointer;\r\n        font-size: 28rpx;\r\n\r\n        &:hover {\r\n            background-color: #f0f8ff;\r\n        }\r\n\r\n        &:last-child {\r\n            border-bottom: none;\r\n        }\r\n\r\n        &:active {\r\n            background-color: #e6f3ff;\r\n        }\r\n    }\r\n\r\n    .location-display-box {\r\n        background-color: #fafafa;\r\n        border: 2rpx solid #e5e5e5;\r\n        border-radius: 12rpx;\r\n        padding: 25rpx;\r\n        min-height: 120rpx;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .location-text {\r\n        font-size: 32rpx;\r\n        color: #333;\r\n        line-height: 1.5;\r\n        word-wrap: break-word;\r\n    }\r\n\r\n    .location-btn {\r\n        width: 100%;\r\n        background-color: #007AFF;\r\n        color: white;\r\n        border-radius: 12rpx;\r\n        padding: 20rpx;\r\n    }\r\n\r\n    .photo-btn-add {\r\n        width: 100%;\r\n        padding: 20rpx;\r\n        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n        color: white;\r\n        border: none;\r\n        border-radius: 12rpx;\r\n        font-size: 28rpx;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .photo-preview-grid {\r\n        display: grid;\r\n        grid-template-columns: repeat(3, 1fr);\r\n        gap: 15rpx;\r\n    }\r\n\r\n    .photo-item {\r\n        position: relative;\r\n        width: 100%;\r\n        padding-bottom: 100%;\r\n        border-radius: 8rpx;\r\n        overflow: hidden;\r\n    }\r\n\r\n    .photo-image {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        width: 100%;\r\n        height: 100%;\r\n    }\r\n\r\n    .photo-delete {\r\n        position: absolute;\r\n        top: 5rpx;\r\n        right: 5rpx;\r\n        width: 40rpx;\r\n        height: 40rpx;\r\n        background-color: rgba(0, 0, 0, 0.6);\r\n        color: white;\r\n        border-radius: 50%;\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n        font-size: 28rpx;\r\n    }\r\n</style>","import MiniProgramPage from 'C:/Users/31110/Documents/HBuilderProjects/test/pages/site/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":"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"}