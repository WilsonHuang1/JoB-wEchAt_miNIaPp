{"version":3,"file":"info.js","sources":["pages/business/info.vue","../../../Downloads/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYnVzaW5lc3MvaW5mby52dWU"],"sourcesContent":["<template>\r\n    <view class=\"container\">\r\n        <view class=\"form-section\">\r\n            <view class=\"section-title\">商业外观基础信息</view>\r\n\r\n            <view class=\"form-group\">\r\n                <text class=\"label\">位置</text>\r\n                <input class=\"input\" v-model=\"formData.location\" placeholder=\"请输入位置信息\" />\r\n            </view>\r\n\r\n            <view class=\"form-group\">\r\n                <text class=\"label\">名称</text>\r\n                <input class=\"input\" v-model=\"formData.name\" placeholder=\"请输入名称\" />\r\n            </view>\r\n\r\n            <view class=\"form-group\">\r\n                <text class=\"label\">外观描述</text>\r\n                <textarea class=\"textarea\" v-model=\"formData.appearance\" placeholder=\"请描述外观情况\" />\r\n            </view>\r\n\r\n            <view class=\"form-group\">\r\n                <text class=\"label\">停车场入口</text>\r\n                <input class=\"input\" v-model=\"formData.parkingEntrance\" placeholder=\"停车场入口位置\" />\r\n            </view>\r\n\r\n            <view class=\"form-group\">\r\n                <text class=\"label\">价格</text>\r\n                <input class=\"input\" type=\"number\" v-model=\"formData.price\" placeholder=\"请输入价格\" />\r\n            </view>\r\n\r\n            <view class=\"form-group\">\r\n                <text class=\"label\">停车反应</text>\r\n                <picker @change=\"onParkingReactionChange\" :value=\"parkingReactionIndex\" :range=\"parkingReactions\">\r\n                    <view class=\"picker\">\r\n                        {{parkingReactions[parkingReactionIndex]}}\r\n                    </view>\r\n                </picker>\r\n            </view>\r\n\r\n            <view class=\"form-group\">\r\n                <text class=\"label\">口碑评价</text>\r\n                <textarea class=\"textarea\" v-model=\"formData.reputation\" placeholder=\"提供口碑评价信息\" />\r\n            </view>\r\n\r\n            <view class=\"button-group\">\r\n                <button class=\"btn-save\" @click=\"saveData\">保存</button>\r\n                <button class=\"btn-cancel\" @click=\"goBack\">返回</button>\r\n            </view>\r\n        </view>\r\n    </view>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                formData: {\r\n                    location: '',\r\n                    name: '',\r\n                    appearance: '',\r\n                    parkingEntrance: '',\r\n                    price: '',\r\n                    parkingReaction: '',\r\n                    reputation: ''\r\n                },\r\n                parkingReactions: ['良好', '一般', '较差', '无停车位'],\r\n                parkingReactionIndex: 0\r\n            }\r\n        },\r\n        methods: {\r\n            onParkingReactionChange(e) {\r\n                this.parkingReactionIndex = e.detail.value;\r\n                this.formData.parkingReaction = this.parkingReactions[e.detail.value];\r\n            },\r\n\r\n            async saveData() {\r\n                // Validation\r\n                if (!this.formData.name.trim()) {\r\n                    uni.showToast({\r\n                        title: '请填写名称',\r\n                        icon: 'none'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                if (!this.formData.location.trim()) {\r\n                    uni.showToast({\r\n                        title: '请填写位置',\r\n                        icon: 'none'\r\n                    });\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    uni.showLoading({\r\n                        title: '保存中...'\r\n                    });\r\n\r\n                    const db = uniCloud.database();\r\n\r\n                    const record = {\r\n                        name: this.formData.name,\r\n                        location: this.formData.location,\r\n                        appearance: this.formData.appearance,\r\n                        parkingEntrance: this.formData.parkingEntrance,\r\n                        parkingPrice: this.formData.price,\r\n                        parkingReaction: this.formData.parkingReaction,\r\n                        reputation: this.formData.reputation,\r\n                        userId: uni.getStorageSync('userId') || 'temp_user',\r\n                        isActive: true\r\n                    };\r\n\r\n                    const result = await db.collection('business_info').add(record);\r\n\r\n                    uni.hideLoading();\r\n                    uni.showToast({\r\n                        title: '保存成功',\r\n                        icon: 'success'\r\n                    });\r\n\r\n                    setTimeout(() => {\r\n                        uni.navigateBack();\r\n                    }, 1500);\r\n\r\n                } catch (error) {\r\n                    uni.hideLoading();\r\n                    console.error('保存失败:', error);\r\n                    uni.showToast({\r\n                        title: '保存失败: ' + error.message,\r\n                        icon: 'none'\r\n                    });\r\n                }\r\n            },\r\n\r\n            goBack() {\r\n                uni.navigateBack();\r\n            }\r\n        },\r\n        onLoad() {\r\n            // 加载已保存的数据\r\n            const savedData = uni.getStorageSync('businessBasicInfo');\r\n            if (savedData) {\r\n                this.formData = savedData;\r\n                // 设置picker的选中状态\r\n                const index = this.parkingReactions.indexOf(savedData.parkingReaction);\r\n                if (index !== -1) {\r\n                    this.parkingReactionIndex = index;\r\n                }\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n    .container {\r\n        padding: 20rpx;\r\n        background-color: #f5f5f5;\r\n        min-height: 100vh;\r\n    }\r\n\r\n    .form-section {\r\n        background: white;\r\n        border-radius: 16rpx;\r\n        padding: 30rpx;\r\n        margin-bottom: 20rpx;\r\n    }\r\n\r\n    .section-title {\r\n        font-size: 36rpx;\r\n        font-weight: bold;\r\n        color: #333;\r\n        margin-bottom: 30rpx;\r\n        text-align: center;\r\n    }\r\n\r\n    .form-group {\r\n        margin-bottom: 30rpx;\r\n    }\r\n\r\n    .label {\r\n        display: block;\r\n        font-size: 28rpx;\r\n        color: #333;\r\n        margin-bottom: 10rpx;\r\n        font-weight: 500;\r\n    }\r\n\r\n    .input,\r\n    .textarea {\r\n        width: 100%;\r\n        padding: 20rpx;\r\n        border: 2rpx solid #e5e5e5;\r\n        border-radius: 12rpx;\r\n        font-size: 28rpx;\r\n        background-color: #fafafa;\r\n\r\n        &:focus {\r\n            border-color: #007AFF;\r\n            background-color: white;\r\n        }\r\n    }\r\n\r\n    .textarea {\r\n        min-height: 120rpx;\r\n        resize: none;\r\n    }\r\n\r\n    .picker {\r\n        padding: 20rpx;\r\n        border: 2rpx solid #e5e5e5;\r\n        border-radius: 12rpx;\r\n        background-color: #fafafa;\r\n        font-size: 28rpx;\r\n        color: #333;\r\n    }\r\n\r\n    .button-group {\r\n        display: flex;\r\n        gap: 20rpx;\r\n        margin-top: 40rpx;\r\n    }\r\n\r\n    .btn-save,\r\n    .btn-cancel {\r\n        flex: 1;\r\n        padding: 24rpx 0;\r\n        border-radius: 12rpx;\r\n        font-size: 32rpx;\r\n        border: none;\r\n    }\r\n\r\n    .btn-save {\r\n        background-color: #007AFF;\r\n        color: white;\r\n\r\n        &:active {\r\n            background-color: #0066CC;\r\n        }\r\n    }\r\n\r\n    .btn-cancel {\r\n        background-color: #f0f0f0;\r\n        color: #666;\r\n\r\n        &:active {\r\n            background-color: #e0e0e0;\r\n        }\r\n    }\r\n</style>","import MiniProgramPage from 'C:/Users/31110/Documents/HBuilderProjects/test/pages/business/info.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","uniCloud"],"mappings":";;AAqDI,MAAK,YAAU;AAAA,EACX,OAAO;AACH,WAAO;AAAA,MACH,UAAU;AAAA,QACN,UAAU;AAAA,QACV,MAAM;AAAA,QACN,YAAY;AAAA,QACZ,iBAAiB;AAAA,QACjB,OAAO;AAAA,QACP,iBAAiB;AAAA,QACjB,YAAY;AAAA,MACf;AAAA,MACD,kBAAkB,CAAC,MAAM,MAAM,MAAM,MAAM;AAAA,MAC3C,sBAAsB;AAAA,IAC1B;AAAA,EACH;AAAA,EACD,SAAS;AAAA,IACL,wBAAwB,GAAG;AACvB,WAAK,uBAAuB,EAAE,OAAO;AACrC,WAAK,SAAS,kBAAkB,KAAK,iBAAiB,EAAE,OAAO,KAAK;AAAA,IACvE;AAAA,IAED,MAAM,WAAW;AAEb,UAAI,CAAC,KAAK,SAAS,KAAK,KAAI,GAAI;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AACD;AAAA,MACJ;AAEA,UAAI,CAAC,KAAK,SAAS,SAAS,KAAI,GAAI;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AACD;AAAA,MACJ;AAEA,UAAI;AACAA,sBAAAA,MAAI,YAAY;AAAA,UACZ,OAAO;AAAA,QACX,CAAC;AAED,cAAM,KAAKC,iBAAS;AAEpB,cAAM,SAAS;AAAA,UACX,MAAM,KAAK,SAAS;AAAA,UACpB,UAAU,KAAK,SAAS;AAAA,UACxB,YAAY,KAAK,SAAS;AAAA,UAC1B,iBAAiB,KAAK,SAAS;AAAA,UAC/B,cAAc,KAAK,SAAS;AAAA,UAC5B,iBAAiB,KAAK,SAAS;AAAA,UAC/B,YAAY,KAAK,SAAS;AAAA,UAC1B,QAAQD,cAAG,MAAC,eAAe,QAAQ,KAAK;AAAA,UACxC,UAAU;AAAA;AAGd,cAAM,SAAS,MAAM,GAAG,WAAW,eAAe,EAAE,IAAI,MAAM;AAE9DA,sBAAG,MAAC,YAAW;AACfA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO;AAAA,UACP,MAAM;AAAA,QACV,CAAC;AAED,mBAAW,MAAM;AACbA,wBAAG,MAAC,aAAY;AAAA,QACnB,GAAE,IAAI;AAAA,MAET,SAAO,OAAO;AACZA,sBAAG,MAAC,YAAW;AACfA,sBAAA,MAAA,MAAA,SAAA,kCAAc,SAAS,KAAK;AAC5BA,sBAAAA,MAAI,UAAU;AAAA,UACV,OAAO,WAAW,MAAM;AAAA,UACxB,MAAM;AAAA,QACV,CAAC;AAAA,MACL;AAAA,IACH;AAAA,IAED,SAAS;AACLA,oBAAG,MAAC,aAAY;AAAA,IACpB;AAAA,EACH;AAAA,EACD,SAAS;AAEL,UAAM,YAAYA,cAAAA,MAAI,eAAe,mBAAmB;AACxD,QAAI,WAAW;AACX,WAAK,WAAW;AAEhB,YAAM,QAAQ,KAAK,iBAAiB,QAAQ,UAAU,eAAe;AACrE,UAAI,UAAU,IAAI;AACd,aAAK,uBAAuB;AAAA,MAChC;AAAA,IACJ;AAAA,EACJ;AACJ;;;;;;;;;;;;;;;;;;;;;;;;ACrJJ,GAAG,WAAW,eAAe;"}